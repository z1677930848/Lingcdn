(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52e1bbcc"],{"32c2":function(e,t,a){},d157:function(e,t,a){"use strict";a("32c2")},ed52:function(e,t,a){"use strict";a.r(t);var o=a("f2bf");const c=Object(o["createElementVNode"])("span",{class:"card-title"},"运营数据",-1),i=Object(o["createElementVNode"])("span",{class:"card-title"},"网络概览",-1),s=Object(o["createElementVNode"])("div",{class:"overview-sub-title"},"带宽峰值",-1),n={class:"overview-sub-value"},l=Object(o["createElementVNode"])("div",{class:"overview-sub-title"},"请求数",-1),r={class:"overview-sub-value"},d=Object(o["createElementVNode"])("div",{class:"overview-sub-title"},"总流量",-1),b={class:"overview-sub-value"},u=Object(o["createElementVNode"])("div",{class:"overview-sub-title"},"拉黑IP数",-1),m={class:"overview-sub-value"},h=Object(o["createElementVNode"])("div",null,"Loading",-1),O=Object(o["createElementVNode"])("span",{class:"card-title"},"监控趋势",-1),j=Object(o["createElementVNode"])("span",{class:"card-title"},"TOP10 数据 (近30分钟)",-1),p={class:"head-img"},g={class:"nickname"},C={class:"hello"},f=Object(o["createElementVNode"])("span",{class:"label"},"账号ID:",-1),V={class:"value"},w=Object(o["createElementVNode"])("span",{class:"label"},"最近登录:",-1),y={class:"value"},x=Object(o["createElementVNode"])("span",{class:"label"},"登录IP:",-1),N={class:"value"},D=Object(o["createElementVNode"])("span",{class:"card-title"},"系统状态",-1),T={class:"item-help",style:{"margin-left":"10px","margin-top":"10px"}},v=Object(o["createElementVNode"])("span",{class:"card-title"},"系统授权",-1),k={key:0},_=Object(o["createElementVNode"])("span",{class:"card-title"},"使用统计",-1);function Y(e,t,a,Y,L,M){const B=Object(o["resolveComponent"])("Icon"),S=Object(o["resolveComponent"])("Radio"),R=Object(o["resolveComponent"])("RadioGroup"),E=Object(o["resolveComponent"])("OperationDataChart"),$=Object(o["resolveComponent"])("Card"),A=Object(o["resolveComponent"])("Col"),I=Object(o["resolveComponent"])("Spin"),U=Object(o["resolveComponent"])("Row"),F=Object(o["resolveComponent"])("bandwidthChart"),q=Object(o["resolveComponent"])("TabPane"),z=Object(o["resolveComponent"])("reqChart"),P=Object(o["resolveComponent"])("trafficChart"),K=Object(o["resolveComponent"])("blackipChart"),W=Object(o["resolveComponent"])("Tabs"),G=Object(o["resolveComponent"])("Table"),J=Object(o["resolveComponent"])("Tag"),H=Object(o["resolveComponent"])("Space"),Q=Object(o["resolveComponent"])("Button");return Object(o["openBlock"])(),Object(o["createBlock"])(U,{class:"user-dashboard",gutter:24},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(A,{class:"admin-index-left",xs:24,md:16},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])($,{class:"card",shadow:""},{title:Object(o["withCtx"])(()=>[Object(o["createVNode"])(B,{class:"icon",type:"ios-podium"}),c]),extra:Object(o["withCtx"])(()=>[Object(o["createVNode"])(R,{modelValue:L.operationDataLastTime,"onUpdate:modelValue":t[0]||(t[0]=e=>L.operationDataLastTime=e),type:"button",size:"small"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(S,{label:"last7"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("近7日")]),_:1}),Object(o["createVNode"])(S,{label:"last30"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("近30日")]),_:1}),Object(o["createVNode"])(S,{label:"lastMonth"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("上个月")]),_:1})]),_:1},8,["modelValue"])]),default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(),Object(o["createBlock"])(E,{timeRange:M.operationDataTimeRange,key:L.operationDataLastTime},null,8,["timeRange"]))]),_:1}),Object(o["createVNode"])($,{class:"card",shadow:""},{title:Object(o["withCtx"])(()=>[Object(o["createVNode"])(B,{class:"icon",type:"ios-podium"}),i]),extra:Object(o["withCtx"])(()=>[Object(o["createVNode"])(R,{modelValue:L.usageCountLastTime,"onUpdate:modelValue":t[1]||(t[1]=e=>L.usageCountLastTime=e),type:"button",size:"small",onOnChange:M.getResUsageCountData},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(S,{label:"today"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("今日")]),_:1}),Object(o["createVNode"])(S,{label:"yesterday"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("昨日")]),_:1}),Object(o["createVNode"])(S,{label:"last7"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("近7日")]),_:1}),Object(o["createVNode"])(S,{label:"last30"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("近30日")]),_:1})]),_:1},8,["modelValue","onOnChange"])]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(U,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(A,{class:"overview-col",xs:12,xl:6},{default:Object(o["withCtx"])(()=>[s,Object(o["createTextVNode"])(),Object(o["createElementVNode"])("div",n,Object(o["toDisplayString"])(L.networkCount.bandwidth),1)]),_:1}),Object(o["createVNode"])(A,{class:"overview-col",xs:12,xl:6},{default:Object(o["withCtx"])(()=>[l,Object(o["createTextVNode"])(),Object(o["createElementVNode"])("div",r,Object(o["toDisplayString"])(L.networkCount.req),1)]),_:1}),Object(o["createVNode"])(A,{class:"overview-col",xs:12,xl:6},{default:Object(o["withCtx"])(()=>[d,Object(o["createTextVNode"])(),Object(o["createElementVNode"])("div",b,Object(o["toDisplayString"])(L.networkCount.traffic),1)]),_:1}),Object(o["createVNode"])(A,{class:"overview-col",xs:12,xl:6},{default:Object(o["withCtx"])(()=>[u,Object(o["createTextVNode"])(),Object(o["createElementVNode"])("div",m,Object(o["toDisplayString"])(L.networkCount.blackip),1)]),_:1}),Object(o["withDirectives"])(Object(o["createVNode"])(I,{style:{"z-index":"3000"},fix:""},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(B,{style:{animation:"ani-demo-spin 1s linear infinite"},type:"ios-loading",size:"18",class:"spin-icon-load"}),h]),_:1},512),[[o["vShow"],L.spinLoad]])]),_:1})]),_:1}),Object(o["createVNode"])(U,{gutter:24},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(A,{class:"monitor-trend",md:16},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])($,{class:"card",style:{height:"520px"},shadow:""},{title:Object(o["withCtx"])(()=>[Object(o["createVNode"])(B,{class:"icon",type:"ios-pulse"}),O]),extra:Object(o["withCtx"])(()=>[Object(o["createVNode"])(R,{modelValue:L.monitorLastTime,"onUpdate:modelValue":t[2]||(t[2]=e=>L.monitorLastTime=e),type:"button",size:"small"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(S,{label:"today"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("今日")]),_:1}),Object(o["createVNode"])(S,{label:"yesterday"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("昨日")]),_:1}),Object(o["createVNode"])(S,{label:"last7"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("近7日")]),_:1}),Object(o["createVNode"])(S,{label:"last30"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("近30日")]),_:1})]),_:1},8,["modelValue"])]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(W,{modelValue:L.monitorType,"onUpdate:modelValue":t[3]||(t[3]=e=>L.monitorType=e)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(q,{label:"带宽",name:"bandwidth"},{default:Object(o["withCtx"])(()=>["bandwidth"==L.monitorType?(Object(o["openBlock"])(),Object(o["createBlock"])(F,{timeRange:M.monitorTimeRange,key:L.monitorLastTime},null,8,["timeRange"])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(q,{label:"请求数",name:"req"},{default:Object(o["withCtx"])(()=>["req"==L.monitorType?(Object(o["openBlock"])(),Object(o["createBlock"])(z,{timeRange:M.monitorTimeRange,key:L.monitorLastTime},null,8,["timeRange"])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(q,{label:"流量",name:"traffic"},{default:Object(o["withCtx"])(()=>["traffic"==L.monitorType?(Object(o["openBlock"])(),Object(o["createBlock"])(P,{timeRange:M.monitorTimeRange,key:L.monitorLastTime},null,8,["timeRange"])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(q,{label:"拉黑IP数",name:"blackip"},{default:Object(o["withCtx"])(()=>["blackip"==L.monitorType?(Object(o["openBlock"])(),Object(o["createBlock"])(K,{timeRange:M.monitorTimeRange,key:L.monitorLastTime},null,8,["timeRange"])):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),Object(o["createVNode"])(A,{class:"top-data",md:8},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])($,{class:"card",style:{height:"520px"},shadow:""},{title:Object(o["withCtx"])(()=>[Object(o["createVNode"])(B,{class:"icon",type:"ios-pulse"}),j]),extra:Object(o["withCtx"])(()=>[]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(W,{modelValue:L.topRes,"onUpdate:modelValue":t[4]||(t[4]=e=>L.topRes=e),onOnClick:M.getSiteTopData},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(q,{label:"域名",name:"top-domain"}),Object(o["createVNode"])(q,{label:"URL",name:"top-url"}),Object(o["createVNode"])(q,{label:"IP",name:"top-ip"}),Object(o["createVNode"])(q,{label:"国家",name:"top-country"})]),_:1},8,["modelValue","onOnClick"]),Object(o["createVNode"])(G,{"show-header":!1,loading:L.siteTopLoading,size:"small",columns:M.siteTopColumns,data:L.siteTopData},{traffic:Object(o["withCtx"])(({row:e})=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(M.formatBytes(e.traffic)),1)]),count:Object(o["withCtx"])(({row:e})=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.count)+"次 ",1)]),_:1},8,["loading","columns","data"])]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(A,{class:"admin-index-right",xs:24,md:8},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])($,{class:"card",shadow:""},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(U,{style:{"justify-content":"center","align-items":"center"}},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(A,{md:5},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",p,Object(o["toDisplayString"])(M.firstName),1)]),_:1}),Object(o["createVNode"])(A,{md:19},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(U,{style:{"align-items":"center","margin-bottom":"5px"}},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("span",g,Object(o["toDisplayString"])(e.info.username),1),Object(o["createVNode"])(B,{style:{cursor:"pointer"},onClick:M.goToUserDetail,type:"ios-create-outline"},null,8,["onClick"]),Object(o["createElementVNode"])("span",C,Object(o["toDisplayString"])(M.greeting),1)]),_:1}),Object(o["createVNode"])(U,null,{default:Object(o["withCtx"])(()=>[f,Object(o["createElementVNode"])("span",V,Object(o["toDisplayString"])(e.info.uid),1)]),_:1}),Object(o["createVNode"])(U,null,{default:Object(o["withCtx"])(()=>[w,Object(o["createElementVNode"])("span",y,Object(o["toDisplayString"])(L.lastLoginTime),1)]),_:1}),Object(o["createVNode"])(U,null,{default:Object(o["withCtx"])(()=>[x,Object(o["createElementVNode"])("span",N,Object(o["toDisplayString"])(L.lastLoginIp)+" ("+Object(o["toDisplayString"])(L.lastLoginLocation)+")",1)]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])($,{class:"card",shadow:""},{title:Object(o["withCtx"])(()=>[Object(o["createVNode"])(B,{class:"icon",type:"md-volume-up"}),D]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(G,{loading:L.sysStatusTableLoading,columns:L.sysStatusColumns,"show-header":!1,data:L.sysStatusData},{state:Object(o["withCtx"])(({row:e})=>[Object(o["createVNode"])(H,null,{default:Object(o["withCtx"])(()=>["正常"==e.state?(Object(o["openBlock"])(),Object(o["createBlock"])(B,{key:0,style:{color:"#19be6b"},type:"ios-checkmark-circle"})):Object(o["createCommentVNode"])("",!0),"Elasticsearch"==e.item&&"正常"!=e.state?(Object(o["openBlock"])(),Object(o["createBlock"])(J,{key:1,color:"warning"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.state),1)]),_:2},1024)):Object(o["createCommentVNode"])("",!0),"Agent状态"==e.item&&"错误详情"==e.state?(Object(o["openBlock"])(),Object(o["createBlock"])(J,{key:2,onClick:t=>M.goToTask(e.task_id),style:{cursor:"pointer"},color:"warning"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.state),1)]),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0),"Agent状态"!=e.item||"检查中"!=e.state&&"待检查"!=e.state?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(J,{key:3,color:"blue"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.state),1)]),_:2},1024)),"Agent状态"==e.item?(Object(o["openBlock"])(),Object(o["createBlock"])(J,{key:4,onClick:M.handleCheckAgent,style:{cursor:"pointer"},color:"primary"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("立即检查")]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)]),_:2},1024)]),_:1},8,["loading","columns","data"]),Object(o["createElementVNode"])("div",T,"Agent状态上次检查时间 "+Object(o["toDisplayString"])(L.agentStatusTime)+"。",1)]),_:1}),Object(o["createVNode"])($,{class:"card",shadow:""},{title:Object(o["withCtx"])(()=>[Object(o["createVNode"])(B,{class:"icon",type:"md-volume-up"}),v]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(G,{loading:L.authTableLoading,columns:L.authColumns,"show-header":!1,data:L.authData},{value:Object(o["withCtx"])(({row:e})=>["操作"!=e.item?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",k,Object(o["toDisplayString"])(e.value),1)):(Object(o["openBlock"])(),Object(o["createBlock"])(Q,{key:1,loading:L.authBtnLoading,onClick:M.handleRefreshAuth,style:{"font-size":"12px"},size:"small",type:"primary"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("刷新授权")]),_:1},8,["loading","onClick"]))]),_:1},8,["loading","columns","data"])]),_:1}),Object(o["createVNode"])($,{class:"card",shadow:""},{title:Object(o["withCtx"])(()=>[Object(o["createVNode"])(B,{class:"icon",type:"md-apps"}),_]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(G,{columns:L.resColumns,"show-header":!1,data:L.resData},null,8,["columns","data"])]),_:1})]),_:1})]),_:1})}var L=a("f870"),M=a("d82d"),B=a("3aa5"),S=a("0ed6"),R=a("807f"),E=a("5502"),$={name:"dashboard",components:{bandwidthChart:L["a"],OperationDataChart:R["a"],trafficChart:M["a"],reqChart:B["a"],blackipChart:S["a"]},computed:{...Object(E["e"])("admin/user",["info"]),operationDataTimeRange(){var e="",t="";return"last7"==this.operationDataLastTime?(e=this.$Date().subtract(7,"day").format("YYYY-MM-DD"),t=this.$Date().add(1,"day").format("YYYY-MM-DD")):"last30"==this.operationDataLastTime?(e=this.$Date().subtract(30,"day").format("YYYY-MM-DD"),t=this.$Date().add(1,"day").format("YYYY-MM-DD")):"lastMonth"==this.operationDataLastTime&&(e=this.$Date().subtract(1,"month").format("YYYY-MM-01"),t=this.$Date().format("YYYY-MM-01")),[e,t]},monitorTimeRange(){var e="",t="";return"last7"==this.monitorLastTime?(e=this.$Date().subtract(7,"day").format("YYYY-MM-DD"),t=this.$Date().add(1,"day").format("YYYY-MM-DD")):"last30"==this.monitorLastTime?(e=this.$Date().subtract(30,"day").format("YYYY-MM-DD"),t=this.$Date().add(1,"day").format("YYYY-MM-DD")):"today"==this.monitorLastTime?(e=this.$Date().format("YYYY-MM-DD"),t=this.$Date().add(1,"day").format("YYYY-MM-DD")):"yesterday"==this.monitorLastTime&&(e=this.$Date().subtract(1,"day").format("YYYY-MM-DD"),t=this.$Date().format("YYYY-MM-DD")),[e,t]},usageCountTimeRange(){var e="",t="";return"last7"==this.usageCountLastTime?(e=this.$Date().subtract(7,"day").format("YYYY-MM-DD"),t=this.$Date().add(1,"day").format("YYYY-MM-DD")):"last30"==this.usageCountLastTime?(e=this.$Date().subtract(30,"day").format("YYYY-MM-DD"),t=this.$Date().add(1,"day").format("YYYY-MM-DD")):"today"==this.usageCountLastTime?(e=this.$Date().format("YYYY-MM-DD"),t=this.$Date().add(1,"day").format("YYYY-MM-DD")):"yesterday"==this.usageCountLastTime&&(e=this.$Date().subtract(1,"day").format("YYYY-MM-DD"),t=this.$Date().format("YYYY-MM-DD")),[e,t]},firstName(){return this.info.username[0].toUpperCase()},greeting(){const e=(new Date).getHours();let t="";return t=e<6?"凌晨好，夜深了，请注意休息":e<12?"早上好，一天之计在于晨":e<18?"下午好，工作顺利吗？不要忘记休息":"晚上好，放松一下，为自己倒杯茶吧",t},siteTopColumns(){return[{title:this.titleMap[this.topRes],key:"res",minWidth:150,tooltip:!0},{title:"请求次数",slot:"count",minWidth:80},{title:"出站流量",slot:"traffic",minWidth:100}]}},data(){return{spinLoad:!1,usageCountLastTime:"today",monitorLastTime:"today",monitorType:"bandwidth",titleMap:{"top-domain":"域名","top-url":"URL","top-ip":"客户端IP","top-country":"国家","top-province":"省份","top-referer":"来源"},siteTopLoading:!1,topRes:"top-domain",authBtnLoading:!1,authTableLoading:!1,nodeCount:"",resUsage:{},sysStatusTableLoading:!1,agentStatusTime:"",sysState:{},lastLoginIp:"",lastLoginTime:"",lastLoginLocation:"",operationDataLastTime:"last7",resColumns:[{title:"项目",key:"item"},{title:"使用",key:"used"}],resData:[{item:"域名数",used:""},{item:"转发数",used:""},{item:"证书",used:""},{item:"已售套餐",used:""}],siteTopData:[],sysStatusColumns:[{title:"项目",key:"item",minWidth:120},{title:"状态",slot:"state",minWidth:170}],sysStatusData:[{item:"主控状态",state:"正常"},{item:"Elasticsearch",state:"正常"},{item:"Agent状态",state:"正常"}],authColumns:[{title:"项目",key:"item"},{title:"状态",slot:"value"}],authData:[{item:"授权节点",value:""},{item:"当前节点",value:""},{item:"到期时间",value:""},{item:"操作",value:""}],networkCount:{}}},created(){this.listLoginLog({limit:2,page:1,uid:this.info.uid}).then(e=>{const t=e.data;1==t.length?(this.lastLoginIp=t[0]["ip"],this.lastLoginLocation=t[0]["ip_location"],this.lastLoginTime=t[0]["create_at2"]):(this.lastLoginIp=t[1]["ip"],this.lastLoginLocation=t[1]["ip_location"],this.lastLoginTime=t[1]["create_at2"])}),this.getSysOverview(),this.getSiteTopData(),this.getResUsageCountData()},methods:{...Object(E["b"])("admin/sys",["listLoginLog","getAdminOverview","doAgentCheck"]),...Object(E["b"])("admin/sys",{setSysInfo:"set"}),...Object(E["b"])("admin/common",["getAuth","refreshAuth"]),...Object(E["b"])("admin/site",["getSiteTop"]),...Object(E["b"])("admin/package",["getResUsageCount"]),goToTask(e){this.$router.push("/sys/task?id="+e)},getResUsageCountData(){this.spinLoad=!0,this.getResUsageCount({start:this.usageCountTimeRange[0],end:this.usageCountTimeRange[1]}).then(e=>{this.networkCount={bandwidth:"0Kbps",req:"0次",traffic:"0KB",blackip:"0个"},e.bandwidth_value&&(this.networkCount.bandwidth=this.formatBandwidth(e.bandwidth_value)),e.req_value&&(this.networkCount.req=this.formatReq(e.req_value)),e.traffic_value&&(this.networkCount.traffic=this.formatTraffic(e.traffic_value)),e.blackip_value&&(this.networkCount.blackip=this.formatBlackIp(e.blackip_value))}).finally(()=>{this.spinLoad=!1})},formatTraffic(e){var t=e/1024;return t>=943718.4?(t/1024/1024).toFixed(2)+" GB":t>=921.6?(t/1024).toFixed(2)+" MB":t.toFixed(2)+" KB"},formatBlackIp(e){return e>1e8?(e/1e8).toFixed(0)+"亿个":e>1e4?(e/1e4).toFixed(0)+"万个":e+"个"},formatReq(e){return e>1e8?(e/1e8).toFixed(0)+"亿次":e>1e4?(e/1e4).toFixed(0)+"万次":e+"次"},formatBandwidth(e){var t=8*e/1e3;return t>=9e5?(t/1e3/1e3).toFixed(2)+" Gbps":t>=900?(t/1e3).toFixed(2)+" Mbps":(8*e/1e3).toFixed(2)+" Kbps"},formatBytes(e){const t=1024,a=1024*t,o=1024*a,c=1024*o;return e<t?e+" Bytes":e<a?(e/t).toFixed(2)+" KB":e<o?(e/a).toFixed(2)+" MB":e<c?(e/o).toFixed(2)+" GB":(e/c).toFixed(2)+" TB"},getSiteTopData(){this.siteTopLoading=!0;const e={recent_time:"30m",type:this.topRes};this.getSiteTop(e).then(e=>{this.siteTopData=e.data.slice(0,10)}).finally(()=>{this.siteTopLoading=!1})},handleRefreshAuth(){this.authBtnLoading=!0,this.refreshAuth().then(e=>{this.$Message.success("刷新成功!"),this.getAuthInfo()}).finally(()=>{this.authBtnLoading=!1})},getAuthInfo(){this.authTableLoading=!0,this.getAuth().then(e=>{var t=e.nodes,a=e.end_at;-1==t&&(t="不限制",a="不限制"),this.authData=[{item:"授权节点",value:t},{item:"当前节点",value:this.nodeCount},{item:"到期时间",value:a},{item:"操作",value:""}]}).finally(()=>{this.authTableLoading=!1})},handleCheckAgent(){this.doAgentCheck().then(e=>{this.$Message.success("已发送检查指令，请等待一分钟左右完成检查"),this.getSysOverview()})},getSysOverview(){this.sysStatusTableLoading=!0,this.getAdminOverview().then(e=>{this.agentStatusTime=e.agent_status.check_at,this.sysStatusData=[{item:"主控状态",state:"正常"}];var t="正常";1==e.es_status.code&&(t=e.es_status.msg),this.sysStatusData.push({item:"Elasticsearch",state:t});var a="正常";"failed"==e.agent_status.state?a="错误详情":"pending"==e.agent_status.state?a="待检查":"process"==e.agent_status.state&&(a="检查中"),this.sysStatusData.push({item:"Agent状态",state:a,task_id:e.agent_status.msg}),this.resData=[{item:"域名数",used:e.domain_count},{item:"转发数",used:e.stream_port_count},{item:"证书",used:e.cert_count},{item:"已售套餐",used:e.user_package_count}],this.nodeCount=e.node_count,this.setSysInfo({cert_count:e.cert_count}),this.getAuthInfo()}).finally(()=>{this.sysStatusTableLoading=!1})},goToUserDetail(){this.$router.push("/account/user")},go_to_recharge(){this.$router.push("/account/user")}}},A=(a("d157"),a("6b0d")),I=a.n(A);const U=I()($,[["render",Y]]);t["default"]=U}}]);